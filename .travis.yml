
# Travis CI configuration for Slack Topic Updater.
#
# @see https://docs.travis-ci.com/user/languages/javascript-with-nodejs/
# @see https://docs.travis-ci.com/user/database-setup/#postgresql
# @author Tim Malone <tdmalone@gmail.com>

language: node_js
node_js: 10.8.0

cache:
  yarn: true
  directories:
    - node_modules

before_install:

  # Upgrade Yarn to the version specified in package.json.
  - curl --location https://yarnpkg.com/install.sh | bash -s -- --version "$( node -e "console.log(require('./package.json').engines.yarn)" )"
  - export PATH="$HOME/.yarn/bin:$PATH"

install:
  - yarn --frozen-lockfile

script:
  - yarn lint
  - yarn test

after_script:
  - yarn report-coverage

# Deploy tagged commits to npm.
deploy:
  provider: npm
  email: tdmalone@gmail.com
  api_key:
    secure: XxJZzhHRyOItU5JalsidMvP0DaBCX+d6HWwlqg9UUO9I1XPGYm18v84emUsKbE5DAMRRo5NYIuQglK/0ZCQ5hNzkzFT49VHX1uAVvvcgr1I1vBozqJxTuuiNH27G81biyL+U+milTc3DDxGLhhO6gC8umDx9f40WYg5R2CjTKOfunADsl6HG67XEPZuA3dVDWMPfr9gFuEFR8o88utu4sVZmLO+1Z2VwAhXdMbwPgRlkAVy2AYS00Cka4QaqZTgJdqgDFHLXnHovmQwYrazksrUq0bLaqTisClzwyp0qBULJUtiY3iKrAAzXcPQNUHO4WAKK5ar2LxI2gTD5vgkwdEY02cUBwYSLEpuX9l0tVt0S55xOhLrT/PFAbxvc4I+mckWV5nGoHla+E76fGeL9OTMC7T5rmWWSFcGXNpre6heCW3H02FV0OpMXwYwCOEttLRWujuI3M+s/CTxklzMa+uf0PhloLdrx1/JUktnnzICZ4HRVmTsCEYTqGEIYLDrXwdXTJv2nuMCaZZvVseyb/57wGzFFiuRrZU161Ed6BYedNWnfmV3lOl14c+HsQ0CAckKLL8kRPY56G7g1OC7WiVCqJby5RfwO9fGey9XDRKB5Eu1tW5lwtN/sbit3YllreowYeFkAvS1OHShjLLYoTBJr4s2UCsRHq26gD3LSHCQ=
  on:
    tags: true
